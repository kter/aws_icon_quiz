<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-router/dist/vue-router.js"></script>
  </head>

  <body>
    <div id="app">
      <router-link to="/top">最初に戻る</router-link>
      <router-view></router-view>
    </div>

    <script type="text/x-template" id="top">
      <div>
        <h1>AWS Icon Quiz</h1>
        <div>
          <router-link :to="{ name: 'questions', params: { questionId: 1 }}">
            はじめる
          </router-link>
        </div>
      </div>
    </script>

    <script type="text/x-template" id="questions">
        <div>
            <h1>AWS Icon Quiz</h1>
            <div>
                <router-link :to="{ name: 'questions', params: { questionId: parseInt(this.$route.params.questionId) + 1 }}">
                    次へ
                </router-link>
            </div>
        </div>
    </script>

    <script>
        /*
         * Questionsコンポーネント
         */
        var questionPage = {
            template: '#questions',
            props: ['questions'],
            methods: {
                fetchQuestion: function () {
                    console.log('called fetchQuestion');
                    console.log(this.props);
                }
            },
            created: function () {
                this.fetchQuestion()
            },
            computed: {
                question: function () {
                    return this.questions
                }
            },
            watch: {
                '$route': 'fetchQuestion'
            }
        }

        /*
         * Topコンポーネント
         */
        var topPage = {
            template: '#top',
        }

        var router = new VueRouter({
            routes: [
                {
                    path: '/top',
                    name: 'top',
                    component: topPage
                },
                {
                    path: '/questions/:questionId',
                    name: 'questions',
                    component: questionPage,
                    props: this.Analytics
                },
                {
                    path: '/result',
                    name: 'result',
                    component: {
                        template: '<div>this is a result page</div>'
                    }
                },
            ]
        })

        var vm = new Vue({
            router: router,
            data: function () {
                return {
                    "Analytics": [
                        {
                            file_path: "Athena.png",
                            name: "Amazon Athena",
                        },
                        {
                            file_path: "CloudSearch.png",
                            name: "Amazon CloudSearch",
                        },
                        {
                            file_path: "Data-Pipeline.png",
                            name: "AWS Data Pipeline",
                        },
                        {
                            file_path: "Elasticsearch-Service.png",
                            name: "Amazon Elasticsearch Service",
                        },
                        {
                            file_path: "EMR.png",
                            name: "Amazon EMR",
                        },
                        {
                            file_path: "Glue.png",
                            name: "AWS Glue",
                        },
                        {
                            file_path: "Kinesis.png",
                            name: "Amazon Kinesis",
                        },
                        {
                            file_path: "Lake-Formation.png",
                            name: "AWS Lake Formation",
                        },
                        {
                            file_path: "Quicksight.png",
                            name: "Amazon QuickSight",
                        },
                        {
                            file_path: "Redshift.png",
                            name: "Amazon Redshift",
                        }
                    ]
                }
            }
        }).$mount('#app')
    </script>
  </body>
<!-- TODO: $routesに依存しているコンポーネントをpropsを使ってこのコンポーネントを使い回せるようにする -->
<!-- TODO: コンポーネントを複数のファイルに分割する
import Home from '@/views/Home'
import Product from '@/views/Product'
// Vuexと同様で最初にプラグインとして登録
Vue.use(VueRouter)
// VueRouterインスタンスを生成する
const router = new VueRouter({
  // URLのパスと紐づくコンポーネントをマッピング
  routes: [
    {
      path: '/',
      component: Home
    },
    {
      path: '/product',
      component: Product
    }
  ]
})
-->
</html>
